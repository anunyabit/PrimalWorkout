import React, { useState } from 'react';
import { Calendar, Clock, Dumbbell, Heart, CheckCircle2, ChevronDown, ChevronUp } from 'lucide-react';

const PrimalWorkoutApp = () => {
  const [selectedDay, setSelectedDay] = useState('Monday');
  const [completedExercises, setCompletedExercises] = useState({});
  const [expandedSections, setExpandedSections] = useState({
    warmup: false,
    exercises: true,
    cooldown: false
  });

  const workoutData = {
    Monday: {
      title: "Full-body Functional Strength",
      focus: "Strength emphasis (squat & hinge)",
      duration: "70-90 min",
      type: "strength",
      warmup: [
        "Joint articulations & core activation (5 min)",
        "Dynamic lower-body drills (3 min)", 
        "Dynamic upper-body drills (3 min)",
        "Prep sets - light compound movements (4 min)"
      ],
      exercises: [
        {
          pattern: "Squat",
          exercise: "Barbell back squat or front squat",
          sets: "4 × 5-6",
          load: "Heavy reps (~75-85% 1RM)",
          rest: "2-3 min"
        },
        {
          pattern: "Hinge", 
          exercise: "Barbell Romanian deadlift or sandbag deadlift",
          sets: "3 × 5-6",
          load: "Heavy reps",
          rest: "2-3 min"
        },
        {
          pattern: "Push",
          exercise: "Barbell bench press or sandbag floor press", 
          sets: "3 × 6-8",
          load: "Moderate",
          rest: "1-2 min"
        },
        {
          pattern: "Pull",
          exercise: "Inverted row using bar in rack or banded bent-over row",
          sets: "3 × 8-10",
          load: "Moderate", 
          rest: "1-2 min"
        },
        {
          pattern: "Twist/Core",
          exercise: "Half-kneeling sandbag rotation or landmine twist; plank with shoulder tap",
          sets: "3 × 8-12 per side",
          load: "Light-moderate",
          rest: "1 min"
        },
        {
          pattern: "Gait/Carry",
          exercise: "Farmer's carry or sandbag bear-hug carry",
          sets: "3 rounds",
          load: "Walk 30-40m per set",
          rest: "1-2 min"
        }
      ],
      cooldown: [
        "Static stretches for worked muscles",
        "Hold each stretch 30-60 seconds",
        "Focus: hamstrings, quads, chest, shoulders, back"
      ]
    },
    Tuesday: {
      title: "Mobility & Flexibility",
      focus: "Recovery and movement quality",
      duration: "20 min", 
      type: "mobility",
      warmup: [
        "Gentle cardio (5 min)",
        "Walking, cycling, or marching in place"
      ],
      exercises: [
        {
          pattern: "Animal Flow",
          exercise: "Beast crawl, crab reach, side kick-through, scorpion reach",
          sets: "10 min flow",
          load: "Bodyweight",
          rest: "As needed"
        },
        {
          pattern: "Deep Squats",
          exercise: "Deep-squat prying, Cossack squats",
          sets: "Part of flow",
          load: "Bodyweight", 
          rest: "Continuous"
        },
        {
          pattern: "Spinal Mobility",
          exercise: "Thoracic spine rotations, hip circles",
          sets: "Part of flow",
          load: "Bodyweight",
          rest: "Continuous"
        }
      ],
      cooldown: [
        "Static stretching (8-10 min)",
        "Hold each stretch 30-60 seconds, repeat 2x",
        "Target: chest/shoulders, upper back, hip flexors, hamstrings, glutes, calves, quads",
        "Breathing & relaxation (2 min) - diaphragmatic breathing"
      ]
    },
    Wednesday: {
      title: "Full-body Functional Strength", 
      focus: "Unilateral & mobility emphasis",
      duration: "60-90 min",
      type: "strength",
      warmup: [
        "Joint articulations & core activation (5 min)",
        "Dynamic lower-body drills (3 min)",
        "Dynamic upper-body drills (3 min)", 
        "Prep sets - light compound movements (4 min)"
      ],
      exercises: [
        {
          pattern: "Lunge",
          exercise: "Walking lunges with sandbag in front rack or barbell",
          sets: "3 × 8-10 per leg",
          load: "Moderate",
          rest: "1-2 min"
        },
        {
          pattern: "Push",
          exercise: "Standing overhead press with barbell or sandbag",
          sets: "4 × 5-6", 
          load: "Heavy reps",
          rest: "2-3 min"
        },
        {
          pattern: "Pull",
          exercise: "Pull-ups (use bands for assistance) or single-arm sandbag row",
          sets: "3 × 6-8 per side",
          load: "Moderate-heavy",
          rest: "1-2 min"
        },
        {
          pattern: "Hinge",
          exercise: "Single-leg Romanian deadlift (bodyweight or holding sandbag)",
          sets: "3 × 8-10 per leg",
          load: "Light-moderate",
          rest: "1-2 min"
        },
        {
          pattern: "Twist/Core", 
          exercise: "Pallof press using band; side plank hip lifts",
          sets: "3 × 10-12 per side",
          load: "Light-moderate",
          rest: "1 min"
        },
        {
          pattern: "Gait/Carry",
          exercise: "Single-arm farmer's carry or suitcase carry (unilateral)",
          sets: "3 rounds",
          load: "30-40m per round",
          rest: "1-2 min"
        }
      ],
      cooldown: [
        "Deep squat hold",
        "Half-kneeling hip-flexor stretch", 
        "Thoracic rotation stretch"
      ]
    },
    Thursday: {
      title: "Mobility & Flexibility",
      focus: "Recovery and movement quality", 
      duration: "20 min",
      type: "mobility",
      warmup: [
        "Gentle cardio (5 min)",
        "Walking, cycling, or marching in place"
      ],
      exercises: [
        {
          pattern: "Animal Flow",
          exercise: "Beast crawl, crab reach, side kick-through, scorpion reach",
          sets: "10 min flow",
          load: "Bodyweight",
          rest: "As needed"
        },
        {
          pattern: "Deep Squats", 
          exercise: "Deep-squat prying, Cossack squats",
          sets: "Part of flow",
          load: "Bodyweight",
          rest: "Continuous"
        },
        {
          pattern: "Spinal Mobility",
          exercise: "Thoracic spine rotations, hip circles", 
          sets: "Part of flow",
          load: "Bodyweight",
          rest: "Continuous"
        }
      ],
      cooldown: [
        "Static stretching (8-10 min)",
        "Hold each stretch 30-60 seconds, repeat 2x",
        "Target: chest/shoulders, upper back, hip flexors, hamstrings, glutes, calves, quads",
        "Breathing & relaxation (2 min) - diaphragmatic breathing"
      ]
    },
    Friday: {
      title: "Full-body Functional Strength",
      focus: "Heavy hinge & mixed movements",
      duration: "70-90 min",
      type: "strength", 
      warmup: [
        "Joint articulations & core activation (5 min)",
        "Dynamic lower-body drills (3 min)",
        "Dynamic upper-body drills (3 min)",
        "Prep sets - light compound movements (4 min)"
      ],
      exercises: [
        {
          pattern: "Hinge",
          exercise: "Conventional deadlift or trap-bar deadlift",
          sets: "4 × 4-6",
          load: "Heavy reps (~75-85% 1RM)",
          rest: "2-3 min"
        },
        {
          pattern: "Squat",
          exercise: "Front squat or goblet squat",
          sets: "3 × 6-8", 
          load: "Moderate",
          rest: "1-2 min"
        },
        {
          pattern: "Push", 
          exercise: "Push-up variation (feet-elevated) or dip (using benches)",
          sets: "3 × 8-12",
          load: "Bodyweight+",
          rest: "1-2 min"
        },
        {
          pattern: "Pull",
          exercise: "Sandbag or barbell bent-over row",
          sets: "3 × 6-8",
          load: "Moderate-heavy", 
          rest: "1-2 min"
        },
        {
          pattern: "Twist/Rotation",
          exercise: "Russian twist holding sandbag or standing sandbag chop",
          sets: "3 × 10-15 per side",
          load: "Light-moderate",
          rest: "1 min"
        },
        {
          pattern: "Gait/Carry",
          exercise: "Sandbag shouldering and carry (clean to shoulder, walk 20m, switch)",
          sets: "3 rounds", 
          load: "Front-loaded carry",
          rest: "1-2 min"
        },
        {
          pattern: "Core Finisher",
          exercise: "Dead bug, hollow body hold, or stir-the-pot plank",
          sets: "2-3 × 20-30 sec",
          load: "Bodyweight",
          rest: "30 sec"
        }
      ],
      cooldown: [
        "Static stretches for worked muscles",
        "Hold each stretch 30-60 seconds", 
        "Focus: posterior chain, shoulders, core"
      ]
    }
  };

  const daysOfWeek = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];
  
  const toggleExerciseComplete = (day, exerciseIndex) => {
    const key = `${day}-${exerciseIndex}`;
    setCompletedExercises(prev => ({
      ...prev,
      [key]: !prev[key]
    }));
  };

  const toggleSection = (section) => {
    setExpandedSections(prev => ({
      ...prev,
      [section]: !prev[section]
    }));
  };

  const currentWorkout = workoutData[selectedDay];

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900">
      <div className="container mx-auto px-4 py-8">
        <div className="text-center mb-8">
          <h1 className="text-4xl font-bold text-white mb-2 flex items-center justify-center gap-3">
            <Dumbbell className="text-purple-400" />
            Primal Movement Trainer
          </h1>
          <p className="text-purple-200">Functional Strength & Mobility Program</p>
        </div>

        {/* Day Navigation */}
        <div className="flex flex-wrap justify-center gap-2 mb-8">
          {daysOfWeek.map((day) => (
            <button
              key={day}
              onClick={() => setSelectedDay(day)}
              className={`px-6 py-3 rounded-lg font-semibold transition-all duration-300 ${
                selectedDay === day
                  ? 'bg-purple-600 text-white shadow-lg transform scale-105'
                  : 'bg-slate-700 text-slate-300 hover:bg-slate-600 hover:text-white'
              }`}
            >
              {day}
            </button>
          ))}
        </div>

        {/* Workout Card */}
        <div className="max-w-4xl mx-auto">
          <div className="bg-slate-800/50 backdrop-blur-lg rounded-2xl border border-slate-700 overflow-hidden">
            {/* Header */}
            <div className={`p-6 ${currentWorkout.type === 'strength' ? 'bg-gradient-to-r from-purple-600 to-blue-600' : 'bg-gradient-to-r from-green-600 to-teal-600'}`}>
              <div className="flex items-center justify-between flex-wrap gap-4">
                <div>
                  <h2 className="text-2xl font-bold text-white mb-1">{selectedDay}</h2>
                  <p className="text-purple-100">{currentWorkout.title}</p>
                  <p className="text-sm text-purple-200 mt-1">{currentWorkout.focus}</p>
                </div>
                <div className="flex items-center gap-4 text-white">
                  <div className="flex items-center gap-2">
                    <Clock size={20} />
                    <span className="font-semibold">{currentWorkout.duration}</span>
                  </div>
                  <div className="flex items-center gap-2">
                    {currentWorkout.type === 'strength' ? <Dumbbell size={20} /> : <Heart size={20} />}
                    <span className="capitalize font-semibold">{currentWorkout.type}</span>
                  </div>
                </div>
              </div>
            </div>

            {/* Warm-up Section */}
            <div className="border-b border-slate-700">
              <button
                onClick={() => toggleSection('warmup')}
                className="w-full p-4 flex items-center justify-between text-left hover:bg-slate-700/50 transition-colors"
              >
                <h3 className="text-lg font-semibold text-white flex items-center gap-2">
                  <Heart className="text-orange-400" size={20} />
                  Warm-up ({currentWorkout.type === 'strength' ? '10-15 min' : '5 min'})
                </h3>
                {expandedSections.warmup ? <ChevronUp className="text-slate-400" /> : <ChevronDown className="text-slate-400" />}
              </button>
              {expandedSections.warmup && (
                <div className="px-4 pb-4">
                  <ul className="space-y-2">
                    {currentWorkout.warmup.map((item, index) => (
                      <li key={index} className="text-slate-300 flex items-start gap-2">
                        <span className="text-orange-400 mt-1">•</span>
                        {item}
                      </li>
                    ))}
                  </ul>
                </div>
              )}
            </div>

            {/* Main Exercises */}
            <div className="border-b border-slate-700">
              <button
                onClick={() => toggleSection('exercises')}
                className="w-full p-4 flex items-center justify-between text-left hover:bg-slate-700/50 transition-colors"
              >
                <h3 className="text-lg font-semibold text-white flex items-center gap-2">
                  <Dumbbell className="text-purple-400" size={20} />
                  Main Exercises
                </h3>
                {expandedSections.exercises ? <ChevronUp className="text-slate-400" /> : <ChevronDown className="text-slate-400" />}
              </button>
              {expandedSections.exercises && (
                <div className="p-4 space-y-4">
                  {currentWorkout.exercises.map((exercise, index) => (
                    <div
                      key={index}
                      className={`bg-slate-700/50 rounded-lg p-4 border-l-4 transition-all duration-300 ${
                        completedExercises[`${selectedDay}-${index}`]
                          ? 'border-green-500 bg-green-900/20'
                          : 'border-purple-500'
                      }`}
                    >
                      <div className="flex items-start justify-between gap-4">
                        <div className="flex-1">
                          <div className="flex items-center gap-3 mb-2">
                            <span className="px-2 py-1 bg-purple-600 text-white text-xs font-semibold rounded uppercase">
                              {exercise.pattern}
                            </span>
                            <h4 className="text-white font-semibold">{exercise.exercise}</h4>
                          </div>
                          <div className="grid grid-cols-1 md:grid-cols-3 gap-2 text-sm">
                            <div className="text-slate-300">
                              <span className="text-purple-400 font-medium">Sets: </span>
                              {exercise.sets}
                            </div>
                            <div className="text-slate-300">
                              <span className="text-purple-400 font-medium">Load: </span>
                              {exercise.load}
                            </div>
                            <div className="text-slate-300">
                              <span className="text-purple-400 font-medium">Rest: </span>
                              {exercise.rest}
                            </div>
                          </div>
                        </div>
                        <button
                          onClick={() => toggleExerciseComplete(selectedDay, index)}
                          className={`p-2 rounded-full transition-all duration-300 ${
                            completedExercises[`${selectedDay}-${index}`]
                              ? 'bg-green-600 text-white'
                              : 'bg-slate-600 text-slate-400 hover:bg-slate-500'
                          }`}
                        >
                          <CheckCircle2 size={20} />
                        </button>
                      </div>
                    </div>
                  ))}
                </div>
              )}
            </div>

            {/* Cool-down Section */}
            <div>
              <button
                onClick={() => toggleSection('cooldown')}
                className="w-full p-4 flex items-center justify-between text-left hover:bg-slate-700/50 transition-colors"
              >
                <h3 className="text-lg font-semibold text-white flex items-center gap-2">
                  <Calendar className="text-blue-400" size={20} />
                  Cool-down
                </h3>
                {expandedSections.cooldown ? <ChevronUp className="text-slate-400" /> : <ChevronDown className="text-slate-400" />}
              </button>
              {expandedSections.cooldown && (
                <div className="px-4 pb-4">
                  <ul className="space-y-2">
                    {currentWorkout.cooldown.map((item, index) => (
                      <li key={index} className="text-slate-300 flex items-start gap-2">
                        <span className="text-blue-400 mt-1">•</span>
                        {item}
                      </li>
                    ))}
                  </ul>
                </div>
              )}
            </div>
          </div>

          {/* Progress Summary */}
          <div className="mt-6 bg-slate-800/50 backdrop-blur-lg rounded-xl border border-slate-700 p-4">
            <h3 className="text-white font-semibold mb-2">Today's Progress</h3>
            <div className="flex items-center gap-4">
              <div className="text-slate-300">
                Completed: {Object.keys(completedExercises).filter(key => 
                  key.startsWith(selectedDay) && completedExercises[key]
                ).length} / {currentWorkout.exercises.length}
              </div>
              <div className="flex-1 bg-slate-700 rounded-full h-2">
                <div 
                  className="bg-gradient-to-r from-purple-500 to-blue-500 h-2 rounded-full transition-all duration-300"
                  style={{
                    width: `${(Object.keys(completedExercises).filter(key => 
                      key.startsWith(selectedDay) && completedExercises[key]
                    ).length / currentWorkout.exercises.length) * 100}%`
                  }}
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default PrimalWorkoutApp;